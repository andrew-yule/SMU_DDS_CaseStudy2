<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.37">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Andrew Yule">

<title>Predicting Employee Attrition</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="SMU_DDS_CaseStudy2_files/libs/clipboard/clipboard.min.js"></script>
<script src="SMU_DDS_CaseStudy2_files/libs/quarto-html/quarto.js"></script>
<script src="SMU_DDS_CaseStudy2_files/libs/quarto-html/popper.min.js"></script>
<script src="SMU_DDS_CaseStudy2_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="SMU_DDS_CaseStudy2_files/libs/quarto-html/anchor.min.js"></script>
<link href="SMU_DDS_CaseStudy2_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="SMU_DDS_CaseStudy2_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="SMU_DDS_CaseStudy2_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="SMU_DDS_CaseStudy2_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="SMU_DDS_CaseStudy2_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Predicting Employee Attrition</h1>
<p class="subtitle lead">An Analysis of Key Factors Leading to Employee Turnover</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Andrew Yule </p>
          </div>
  </div>
    
    
  </div>
  

</header>

<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>The specific goals of this analysis are to:</p>
<ol type="1">
<li><p>Identify the top three factors that contribute to attrition</p></li>
<li><p>Learn about any job role specific trends that may exist in the data set (e.g., “Data Scientists have the highest job satisfaction”).</p></li>
<li><p>Provide any other interesting trends and observations from your analysis.</p></li>
<li><p>Build a model to predict attrition</p></li>
</ol>
</section>
<section id="executive-summary" class="level2">
<h2 class="anchored" data-anchor-id="executive-summary">Executive Summary</h2>
<p>To be filled in</p>
</section>
<section id="libraries-and-data-loading" class="level2">
<h2 class="anchored" data-anchor-id="libraries-and-data-loading">Libraries and Data Loading</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gridExtra)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(class)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(caret)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(e1071)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_bw</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>employeeData <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">"https://raw.githubusercontent.com/ayule89/SMU_DDS_CaseStudy2/main/Data/CaseStudy2-data.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="identifying-the-top-three-factors-that-contribute-to-attrition" class="level2">
<h2 class="anchored" data-anchor-id="identifying-the-top-three-factors-that-contribute-to-attrition">1. Identifying the top three factors that contribute to attrition</h2>
<section id="how-many-of-the-870-employees-in-the-data-actually-left" class="level4">
<h4 class="anchored" data-anchor-id="how-many-of-the-870-employees-in-the-data-actually-left">How many of the 870 employees in the data actually left?</h4>
<p>There were 140 out of 870 employees (16%) that left.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>employeeData <span class="sc">|&gt;</span> <span class="fu">count</span>(Attrition)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  Attrition     n
  &lt;chr&gt;     &lt;int&gt;
1 No          730
2 Yes         140</code></pre>
</div>
</div>
</section>
<section id="screening-all-variables-to-visually-investigate-which-parameters-are-the-highest-indicators-of-attrition" class="level3">
<h3 class="anchored" data-anchor-id="screening-all-variables-to-visually-investigate-which-parameters-are-the-highest-indicators-of-attrition">Screening all variables to visually investigate which parameters are the highest indicators of attrition</h3>
<p>There are a number of variables that could attribute to employee attrition. We will first visually screen each of the variables to look for potential leading indicators. The full list of variables includes:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(employeeData)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "ID"                       "Age"                     
 [3] "Attrition"                "BusinessTravel"          
 [5] "DailyRate"                "Department"              
 [7] "DistanceFromHome"         "Education"               
 [9] "EducationField"           "EmployeeCount"           
[11] "EmployeeNumber"           "EnvironmentSatisfaction" 
[13] "Gender"                   "HourlyRate"              
[15] "JobInvolvement"           "JobLevel"                
[17] "JobRole"                  "JobSatisfaction"         
[19] "MaritalStatus"            "MonthlyIncome"           
[21] "MonthlyRate"              "NumCompaniesWorked"      
[23] "Over18"                   "OverTime"                
[25] "PercentSalaryHike"        "PerformanceRating"       
[27] "RelationshipSatisfaction" "StandardHours"           
[29] "StockOptionLevel"         "TotalWorkingYears"       
[31] "TrainingTimesLastYear"    "WorkLifeBalance"         
[33] "YearsAtCompany"           "YearsInCurrentRole"      
[35] "YearsSinceLastPromotion"  "YearsWithCurrManager"    </code></pre>
</div>
</div>
<p>Before investigating attrition across each variable, some of the numerical scales will need to put into various bins to make analysis easier. In order to determine appropriate bins, we’ll first plot histograms of the numerical variables, which include: Age, DailyRate, DistanceFromHome, HourlyRate, MonthlyIncome, MonthlyRate, TotalWorkingYears, YearsAtCompany, YearsInCurrentRole, YearsSinceLastPromotion, YearsWithCurrManager.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>employeeData <span class="sc">|&gt;</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Age, DailyRate, DistanceFromHome, HourlyRate, MonthlyIncome, MonthlyRate, TotalWorkingYears, YearsAtCompany, YearsInCurrentRole, YearsSinceLastPromotion, YearsWithCurrManager) <span class="sc">|&gt;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">everything</span>(), <span class="at">names_to =</span> <span class="st">"column"</span>, <span class="at">values_to =</span> <span class="st">"value"</span>) <span class="sc">|&gt;</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> value)) <span class="sc">+</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>() <span class="sc">+</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>column, <span class="at">scales =</span> <span class="st">'free'</span>, <span class="at">ncol =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="SMU_DDS_CaseStudy2_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Based on visually inspecting the histograms, the following bins for various numerical variables will be used:</p>
<ul>
<li>Age (5 years)<br>
</li>
<li>Daily rate (400 dollars)<br>
</li>
<li>Distance from home (5 miles)<br>
</li>
<li>Hourly rate (20 dollars)<br>
</li>
<li>Monthly income (5,000 dollars)<br>
</li>
<li>Monthly rate (5,000 dollars)</li>
<li>Total working years (5 years)<br>
</li>
<li>Years at company (5 years)<br>
</li>
<li>Years in current role (5 years)<br>
</li>
<li>Years since last promotion (5 years)<br>
</li>
<li>Years under current manager (5 years)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>employeeDataWithBuckets <span class="ot">=</span> employeeData <span class="sc">|&gt;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">Age =</span> <span class="fu">round</span>(Age<span class="sc">/</span><span class="dv">5</span>)<span class="sc">*</span><span class="dv">5</span>, </span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">DailyRate =</span> <span class="fu">round</span>(DailyRate<span class="sc">/</span><span class="dv">400</span>)<span class="sc">*</span><span class="dv">400</span>,</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">DistanceFromHome =</span> <span class="fu">round</span>(DistanceFromHome<span class="sc">/</span><span class="dv">5</span>)<span class="sc">*</span><span class="dv">5</span>,</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">HourlyRate =</span> <span class="fu">round</span>(HourlyRate<span class="sc">/</span><span class="dv">20</span>)<span class="sc">*</span><span class="dv">20</span>,</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">MonthlyIncome =</span> <span class="fu">round</span>(MonthlyIncome<span class="sc">/</span><span class="dv">5000</span>)<span class="sc">*</span><span class="dv">5000</span>,</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">MonthlyRate =</span> <span class="fu">round</span>(MonthlyRate<span class="sc">/</span><span class="dv">5000</span>)<span class="sc">*</span><span class="dv">5000</span>,</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">TotalWorkingYears =</span> <span class="fu">round</span>(TotalWorkingYears<span class="sc">/</span><span class="dv">5</span>)<span class="sc">*</span><span class="dv">5</span>,</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">YearsAtCompany =</span> <span class="fu">round</span>(YearsAtCompany<span class="sc">/</span><span class="dv">5</span>)<span class="sc">*</span><span class="dv">5</span>,</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">YearsInCurrentRole =</span> <span class="fu">round</span>(YearsInCurrentRole<span class="sc">/</span><span class="dv">5</span>)<span class="sc">*</span><span class="dv">5</span>,</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">YearsSinceLastPromotion =</span> <span class="fu">round</span>(YearsSinceLastPromotion<span class="sc">/</span><span class="dv">5</span>)<span class="sc">*</span><span class="dv">5</span>,</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">YearsWithCurrManager =</span> <span class="fu">round</span>(YearsWithCurrManager<span class="sc">/</span><span class="dv">5</span>)<span class="sc">*</span><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now we’ll go through and create plots of each variable showing the breakdown between attrition to visually look for any strong relationships</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Helper function that creates a plot showing the breakdown in attrition for a given variable across it's possible values</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>findAttritionBreakdown <span class="ot">=</span> <span class="cf">function</span>(df, colName) {</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(<span class="sc">!!</span><span class="fu">sym</span>(colName)) <span class="sc">|&gt;</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(Attrition) <span class="sc">|&gt;</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="sc">!!</span><span class="fu">sym</span>(colName), <span class="at">y =</span> n, <span class="at">fill =</span> Attrition)) <span class="sc">+</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"fill"</span>) <span class="sc">+</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.55</span>))</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Test the function</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="co">#findAttritionBreakdown(employeeDataWithBuckets, "DistanceFromHome")</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>cols <span class="ot">=</span> <span class="fu">colnames</span>(employeeData)</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop columns that we don't want to include in the analysis (ID, Attrition, EmployeeCount, EmployeeNumber, Over18, StandardHours) </span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>cols <span class="ot">=</span> cols[<span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="sc">-</span><span class="dv">3</span>, <span class="sc">-</span><span class="dv">10</span>, <span class="sc">-</span><span class="dv">11</span>, <span class="sc">-</span><span class="dv">23</span>, <span class="sc">-</span><span class="dv">28</span>)]</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a list of plots across all of the columns using the map function from the purr package</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>plots <span class="ot">=</span> <span class="fu">map</span>(cols, <span class="cf">function</span>(col) <span class="fu">findAttritionBreakdown</span>(employeeDataWithBuckets, col))</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Display plots on one page</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(<span class="at">grobs =</span> plots, <span class="at">ncol =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="SMU_DDS_CaseStudy2_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
<p>Based on examining the plots above, the following key variables were identified:</p>
<ul>
<li>Age<br>
</li>
<li>BusinessTravel<br>
</li>
<li>DistanceFromHome<br>
</li>
<li>Education<br>
</li>
<li>EnvironmentSatisfaction<br>
</li>
<li>JobInvolvment<br>
</li>
<li>JobRole<br>
</li>
<li>JobSatisfaction<br>
</li>
<li>MaritalStatus<br>
</li>
<li>NumCompaniesWorked<br>
</li>
<li>OverTime<br>
</li>
<li>StockOptionLevel<br>
</li>
<li>TotalWorkingYears<br>
</li>
<li>WorkLifeBalance<br>
</li>
<li>YearsWithCurrManager</li>
</ul>
<p>In order to quantitatively determine the top 3 variables influencing attrition, we’ll build a logistic regression model using the variables above. Before using the results of that regression to determine top variables influencing attrition, we’ll first use cross validation to determine the type of accuracy that can be achieved using logistic regression.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Train a generalized linear model using a binomial family to perform logistic regression</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>model <span class="ot">=</span> <span class="fu">train</span>(Attrition <span class="sc">~</span> Age <span class="sc">+</span> BusinessTravel <span class="sc">+</span> DistanceFromHome <span class="sc">+</span> DistanceFromHome <span class="sc">+</span> Education <span class="sc">+</span> EnvironmentSatisfaction <span class="sc">+</span> JobInvolvement <span class="sc">+</span> JobRole <span class="sc">+</span> JobSatisfaction <span class="sc">+</span> MaritalStatus <span class="sc">+</span> NumCompaniesWorked <span class="sc">+</span> OverTime <span class="sc">+</span> StockOptionLevel <span class="sc">+</span> TotalWorkingYears <span class="sc">+</span> WorkLifeBalance <span class="sc">+</span> YearsWithCurrManager, <span class="at">data =</span> employeeData, <span class="at">method =</span> <span class="st">"glm"</span>, <span class="at">family =</span> <span class="st">"binomial"</span>, <span class="at">trControl =</span> <span class="fu">trainControl</span>(<span class="at">method =</span> <span class="st">"LOOCV"</span>))</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize the results to determine the possible accuracy</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>model</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Generalized Linear Model 

870 samples
 15 predictor
  2 classes: 'No', 'Yes' 

No pre-processing
Resampling: Leave-One-Out Cross-Validation 
Summary of sample sizes: 869, 869, 869, 869, 869, 869, ... 
Resampling results:

  Accuracy   Kappa    
  0.8850575  0.4852071</code></pre>
</div>
</div>
<p>Using cross validation on our logistic regression, we can achieve an accuracy of over 88% which is high enough to warrant further use of the model to determine key variables influencing attrition.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change Attrition (no/yes) into numerical values to work within the glm function</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>employeeDataForLogisticRegression <span class="ot">=</span> employeeData <span class="sc">|&gt;</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Attrition =</span> <span class="fu">ifelse</span>(Attrition <span class="sc">==</span> <span class="st">"No"</span>, <span class="dv">0</span>, <span class="dv">1</span>))</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit the logistic regression model</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>model <span class="ot">=</span> <span class="fu">glm</span>(Attrition <span class="sc">~</span> Age <span class="sc">+</span> BusinessTravel <span class="sc">+</span> DistanceFromHome <span class="sc">+</span> DistanceFromHome <span class="sc">+</span> Education <span class="sc">+</span> EnvironmentSatisfaction <span class="sc">+</span> JobInvolvement <span class="sc">+</span> JobRole <span class="sc">+</span> JobSatisfaction <span class="sc">+</span> MaritalStatus <span class="sc">+</span> NumCompaniesWorked <span class="sc">+</span> OverTime <span class="sc">+</span> StockOptionLevel <span class="sc">+</span> TotalWorkingYears <span class="sc">+</span> WorkLifeBalance <span class="sc">+</span> YearsWithCurrManager, <span class="at">family =</span> <span class="st">"binomial"</span>, <span class="at">data =</span> employeeDataForLogisticRegression)</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Use the results of the model fitting along with the broom package which collects model metrics into data frames to quantitatively determine the top parameters</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(model) <span class="sc">|&gt;</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(p.value <span class="sc">&lt;</span> <span class="fl">0.2</span>) <span class="sc">|&gt;</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(<span class="fu">abs</span>(estimate)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 17 × 5
   term                            estimate std.error statistic  p.value
   &lt;chr&gt;                              &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
 1 JobRoleResearch Director         -1.95      1.19       -1.63 1.02e- 1
 2 OverTimeYes                       1.85      0.240       7.72 1.21e-14
 3 JobRoleManufacturing Director    -1.78      0.858      -2.08 3.79e- 2
 4 JobRoleSales Representative       1.71      0.581       2.94 3.30e- 3
 5 (Intercept)                       1.66      1.11        1.49 1.37e- 1
 6 MaritalStatusSingle               1.41      0.472       2.99 2.77e- 3
 7 BusinessTravelTravel_Frequently   1.27      0.462       2.75 6.01e- 3
 8 JobRoleHuman Resources            1.07      0.713       1.50 1.34e- 1
 9 MaritalStatusMarried              0.911     0.390       2.34 1.94e- 2
10 JobInvolvement                   -0.776     0.160      -4.86 1.19e- 6
11 BusinessTravelTravel_Rarely       0.539     0.412       1.31 1.92e- 1
12 WorkLifeBalance                  -0.516     0.158      -3.28 1.05e- 3
13 JobSatisfaction                  -0.443     0.104      -4.28 1.88e- 5
14 EnvironmentSatisfaction          -0.250     0.104      -2.40 1.64e- 2
15 NumCompaniesWorked                0.176     0.0485      3.63 2.85e- 4
16 DistanceFromHome                  0.0426    0.0139      3.06 2.19e- 3
17 Age                              -0.0308    0.0174     -1.77 7.66e- 2</code></pre>
</div>
</div>
<p>Based on the results from the logistic regression model, the following variables are found to be the most important when determining possible employee attrition:</p>
<ol type="1">
<li>Job role</li>
</ol>
<ul>
<li>Most notably sales representative positions see very high attrition, while research and manufacturing directories typically have very little attrition<br>
</li>
</ul>
<ol start="2" type="1">
<li>Over time</li>
</ol>
<ul>
<li>Employees that work overtime are much more likely to have attrition than those that do not<br>
</li>
</ul>
<ol start="3" type="1">
<li>Marital status</li>
</ol>
<ul>
<li>Single employees are much more likely to have attrition than those that are married and even more so than those that are divorced</li>
</ul>
<p>Additional notable variables included:</p>
<ol type="1">
<li>Business travel - regular travel was highly correlated with higher attrition<br>
</li>
<li>Job involvement - low job involvement was highly correlated with higher attrition<br>
</li>
<li>Work life balance - lower work life balance was highly correlated with higher attrition</li>
</ol>
</section>
</section>
<section id="learn-about-any-job-role-specific-trends-that-may-exist-in-the-data-set" class="level2">
<h2 class="anchored" data-anchor-id="learn-about-any-job-role-specific-trends-that-may-exist-in-the-data-set">1. Learn about any job role specific trends that may exist in the data set</h2>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>